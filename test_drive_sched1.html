<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Test-Drive</title>
    <!-- plugins:css -->
   
   <link rel="stylesheet" href="assets/css/font-awesome.min.css">
    <link rel="stylesheet" href="assets/vendors/css/vendor.bundle.base.css">
    <link rel="stylesheet" href="assets/vendors/css/vendor.bundle.addons.css">
    
    
    <link rel="stylesheet" href="timepicker/normalize.css">
        <link rel="stylesheet" href="timepicker/master.css">
        
         <link href="assets/css/jquerysctiptop.css" rel="stylesheet" type="text/css">
         <!-- <link rel="stylesheet" href="https://www.jqueryscript.net/demo/Responsive-Hour-Minute-Picker-Plugin-For-jQuery-hr-timePicker/css/hr-timePicker.min.css"> -->
         <link rel="stylesheet" href="assets/css/hr-timepicker.min.css">
        
         <link href="assets/css/jquerysctiptop.css" rel="stylesheet" type="text/css">
        
        

    <!-- endinject -->
    <!-- plugin css for this page -->
    <link rel="stylesheet" href="assets/css/shared/style.css">
    <!-- endinject -->
    <!-- Layout styles -->
    <link rel="stylesheet" href="assets/css/demo_1/style.css">
    <!-- End Layout styles -->
    <link rel="shortcut icon" href="assets/images/favicon.png" />
<!--     
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"></link> -->
    
    
   
<!-- <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css" rel="stylesheet"/> -->
<link rel="stylesheet" href="assets/css/jquery-ui.css">
<link rel="stylesheet" href="assets/css/timepicker.css">
<link rel="stylesheet" href="assets/css/timepicker.min.css">

<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-timepicker/1.10.0/jquery.timepicker.min.css.map"> -->

<link rel="stylesheet" href="assets/css/timepicker.min.css.map">
<link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet">

    
    

<style>


*
{

font-family: 'Open Sans', sans-serif"

}


.wickedpicker {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    box-shadow: 0 0 0 1px rgba(14,41,57,.12), 0 2px 5px rgba(14,41,57,.44), inset 0 -1px 2px rgba(14,41,57,.15);
    background: #fefefe;
    margin: 0 auto;
    border-radius: .1px;
    width: 270px;
    font-size: 14px;
    display: none;
    height: 180px !important;
}


#ex1 {
  
  height: 550px;
  
  overflow-y: scroll;
}


    .card .card-body {
    padding: 1.88rem 1.81rem;
}
.card-body {
    -webkit-box-flex: 1;
    -ms-flex: 1 1 auto;
    flex: 1 1 auto;
    padding: 1.25rem;
}

.card {
    position: relative;
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
    -ms-flex-direction: column;
    flex-direction: column;
    min-width: 0;
    word-wrap: break-word;
    background-color: #fff;
    background-clip: border-box;
    border: 1px solid rgba(0, 0, 0, 0.125);
    border-radius: 0.25rem;
}

.table thead th {
    border-top: 0;
    border-bottom-width: 1px;
    font-weight: 500;
    border-bottom-color: #dee2e6;
    color: white;
}

.hr-time-picker {
    background: white;
    max-width: 280px !important;
    min-width: 230px;
    height: 200px;
    overflow: auto;
}


element.style {
    height: 2rem;
}
.picked-time-wrapper .picked-time {
    padding: 9px;
    border: 1px solid #dedada;
    font-size: 15px;
    width: 50% !important;
    box-sizing: border-box;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    -ms-box-sizing: border-box;
    -o-box-sizing: border-box;
    background: url(img/10-512.png) 97% no-repeat #fffffd;
    background-size: 24px;
    cursor: pointer;
    outline: 0;
}



</style>


  </head>
  <body>
    <div class="container-scroller">
      <!-- partial:../../partials/_navbar.html -->
      <nav class="navbar default-layout col-lg-12 col-12 p-0 fixed-top d-flex flex-row">
        <div class="text-center navbar-brand-wrapper d-flex align-items-top justify-content-center">
          <a class="navbar-brand brand-logo" href="dashboard.html">
            <img src="assets/images/img/logo-148x48.png" alt="logo" /> </a>
          <a class="navbar-brand brand-logo-mini" href="dashboard.html">
            <img src="assets/images/img/logo-148x48.png" alt="logo" /> </a>
        </div>
        <div class="navbar-menu-wrapper d-flex align-items-center">
         
         
          <ul class="navbar-nav ml-auto">
            <li class="nav-item dropdown">
             
            </li>
            <li class="nav-item dropdown" id="replace">
             
           </li>
   
           <li  style="margin-left: 8px" id="siteID" >
            
            </li>
           

            <li style="margin-left: 8px">
              </li>
              
          </ul>
         
        </div>
      </nav>
      
      
     
      
      
      
      
      
      
      <!-- partial -->
      <div class="container-fluid page-body-wrapper">
        <!-- partial:partials/_sidebar.html -->
        <nav class="sidebar sidebar-offcanvas" id="sidebar">
          <ul class="nav">
           <br>
            <li class="nav-item">
              <a  href="dashboard.html">
                <img src="assets/images/img/dashboard.png" style="width: 18px;margin-left: 40px;">
                <span class="menu-title" style="color:white;margin-left:8px">Dashboard</span>
              </a>
            </li>
<br>
            <li class="nav-item">
              <a  href="livestatus.html">
                <img src="assets/images/img/location-sign.png" style="width: 18px;margin-left: 40px;">
                <span class="menu-title" style="color:white;margin-left:8px">Live Status</span>
              </a>
            </li><br>
            <li class="nav-item">
              <a  href="product.html">
                <img src="assets/images/img/sports-car.png" style="width: 18px;margin-left: 40px;">
                <span class="menu-title" style="color:white;margin-left:8px">Product/Dealer Wise</span>
              </a>
            </li><br>
            
            <li class="nav-item" style="background-color:blue;border-top-right-radius:25px;border-bottom-right-radius:25px;padding-top:5px;padding-bottom:5px;">
                <a  href="test_drive_sched.html">
                <img src="img/dashboard unselected.png" style="width: 18px;margin-left: 40px;">
                <span class="menu-title" style="color:white;margin-left:8px">TestDrive Scheduler</span>
              </a>
            </li><br>
            
            <li class="nav-item">
              <a  href="report.html">
                <img src="assets/images/img/invoice.png" style="width: 18px;margin-left: 40px;">
                <span class="menu-title" style="color:white;margin-left:8px">Reports</span>
              </a>
            </li>
            
          </ul>
        </nav>
        <!-- partial -->



        
        <div class="main-panel">
          <div class="content-wrapper">
            <div class="row">
            <div class="col-lg-12 grid-margin stretch-card" > 
                <nav class="navbar default-layout col-lg-12 col-12 p-0  d-flex flex-row">
        
                    <div class="navbar-menu-wrapper d-flex align-items-center">
                     
                     
                      <ul class="navbar-nav">
                        <li   >
                         <a href="test_drive_sched.html" style="text-decoration: none;color:black">Inventory</a>
                        </li>
                        <li  style="margin-left: 20px;border-right: 1px solid #c4c4c4;background-color: #2139C6;color:white; width: 150px;height: 25px;text-align: center;">
                        <a href="test_drive_sched1.html" style="text-decoration: none;color: white;"> Test Drive Scheduler</a>
                       </li>
               
                       <li  style="margin-left: 20px" >
                         <a href="test_drive_list.html" style="text-decoration: none;color:black">Test Drive List</a>
                        </li>
                       
            
                       
                          
                      </ul>
                     
                    </div>
                          </nav>
              </div>
          </div>



          <div class="row" id="crttbl">
            <div class="col-lg-12 grid-margin stretch-card" > 
              <div class="card">
                <div class="card-body" id="ex1">
                 
                 <div class="row1" id="schedule">
                 
                 
                 <div class="row">
                 
                 <div class="col-sm-6">
                 Select Car Name
                 <select  style="margin-left:118px;height:2rem;width:13rem;"id="car_name" onchange="getComboA1(this)">
                 
                 </select>
                 
                 </div>
                 
                 </div>
                 
                 <br><br>
                 
                 <div class="row" id="test_schedule">
                 
                  
                 
                 <div class="col-sm-6">
                 <div class="form-group">
          Test Drive Date 
          <span style="margin-left:130px;"><input style="width:13rem"type="text" id="ToDate"></span>
    </div>
                 </div>
                 
                 <div class="col-sm-6">
                 <div class="form-group" style="margin-top:-80px;">
                 Select Start Time : 
		
					<input type="text" id="timepicker-12-hr" name="timepicker-12-hr" class="timepicker-12-hr">
				
			
                 </div>
                 </div>
                 
                
                 
                 </div>
                 
                 <br><br>
                 
                 <div class="row" id="test_schedule">
                 
                  
                 
                 <div class="col-sm-6">
                 Estimated TestDrive Duration  <select  style="margin-left:32px;height:2rem;width:13.3rem;margin-top: 10px" onchange="getComboA(this)" id="tddu">
                 <option >Select Time in Minutes</option>
                 <option value="15">15</option>
                 <option value="30">30</option>
                 <option value="45">45</option>
                 <option value="60">60</option>
                 <option value="other">Other</option>
                 </select>
                 </div>
                 
                
                 
                 <div class="col-sm-6" id="timesh" style="display: none;">

        <div class="hr-time-picker">
            <div class="picked-time-wrapper">
            Duration :
                <input type="text" class="picked-time" style="height: 2rem;">
            </div>
            <div class="pick-time-now">
                <div class="hours hr-timer">
                    <div class="movable-area">
                        <ul></ul>
                    </div>
                </div>
                <div class="minutes hr-timer">
                    <ul></ul>
                </div>
        </div>
        <!-- Time picker end here-->

    </div>
                 </div>
                 
                 </div>
                 
                 
                 <br><br>
                 
                 <div class="row" style="text-align: center;" id="test_schedule">
                 
                  
                 
                 <div class="col-sm-12">
				       <button type="button" style="background-color: #2139C6;font-size:18px" class="btn btn-primary" id="check" >&nbsp;&nbsp;&nbsp;Check Availability&nbsp;&nbsp;&nbsp;</button>
				
                 </div>
                 
                
                 
                 
                 
                 </div>
                 
                 <br><br>
                 
                 
                 <div class="row" id="test_schedule">
                 
                 <table class="table table-bordered">
                      <thead style="background-color: #82ca9c;color:white">
                        <tr>
                          <th>Car Name</th>
                          <th>Grade Name</th>
                          <th >Suffix Code</th>
                          <th>Status</th>
                        </tr>
                      </thead>
                      <tbody  class='listings' id="bodypage">
                       
                      </tbody>
                    </table>
                    
                    <h1 style="display: none" id="no-data">No Car Found</h1>
                    
                 
                 </div>
                 </div>
                 
                 
                 
                 <!-- Book Appointment  -->
                 
                 
                
                 
                 
                </div>
              </div>
            </div>
        </div>
        
        
        
       
       
           </div>
         
  
          
          <!-- content-wrapper ends -->
          <!-- partial:../../partials/_footer.html -->
          
          <!-- partial -->
        </div>
        <!-- main-panel ends -->
      </div>
      <!-- page-body-wrapper ends -->
    </div>
    <!-- container-scroller -->
    <!-- plugins:js -->
   
    <script src="assets/js/jquery.min.js"></script>
    
    
                <!-- <link rel="stylesheet" href="http://ericjgagnon.github.io/wickedpicker/wickedpicker/wickedpicker.min.css"> -->
                <link rel="stylesheet" href="assets/css/wickedpicker.min.css">
                 <script src="https://code.jquery.com/jquery-3.2.0.min.js"></script>
                 <script src="assets/js/timepicker.min.js"></script>
    
     <script type="text/javascript" src="timepicker/wickedpicker.js"></script>
     
      <script type="text/javascript" src="timepicker/smooth_scroll.js"></script>
        <script type="text/javascript" src="timepicker/wickedpicker.min.js"></script>
<!--     
   <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" /> -->
    
    

    <script src="assets/js/moment.min.js"></script>
    <scrip src="assets/js/daterangepicker.js"></script>
    <link src="assets/css/daterangepicker.css"></link>



    
    
    <script>
  $( function() {
	  
	  
	  
	  
	  
	
	  var start = moment();
  
      function cb(start) 
      {
          $('#ToDate').html(' From ' +" : "+start.format('DD/MM/YYYY') );
          
          
          document.getElementById('check').addEventListener('click', function() {
        	  checkavail(start.format('DD/MM/YYYY'));
        	  
        	});
         
      }
      
      
	 

	  $('#ToDate').daterangepicker({
		  
		    startDate: start,
		    singleDatePicker: true,
		    showDropdowns: true,
		  }, cb);
  
      cb(start);
      
  });
  

  
  
  
  
  function bookcar(ele) 
  {
	  
	 
		
		var td_car = ele.id;
		
		
		localStorage.setItem("td_id",td_car);
		
		window.location.href = "form.html";
		
			
	
  }
  
  
 
  
  </script>



  <script type="text/javascript">
  
  
  
  function getComboA(selectObject) 
  {
	  var value = selectObject.value;
	  
	  
	  localStorage.setItem("selectvalue",selectObject.value);
	  
	  
	  if(value == "other")
		{
		
		 document.getElementById('timesh').style.display = "block";
		}
	  else
		  {
		  document.getElementById('timesh').style.display = "none";
		  }
	 
	  
  }


	function checkavail(start) 
	{
		 var startdate = start;
		 
		 localStorage.setItem("date",startdate);
		 
		
		var selectvalue =  localStorage.getItem("selectvalue");
		
		
		if(selectvalue == "other")
			{
			
			 
			 var hrtime =  $(".picked-time").val();
				
		     var a = hrtime.split(':'); 

		     var td_duration = (+a[0]) * 60 + (+a[1]);
		     
		     
		     
		     localStorage.setItem("td_duration",td_duration);

			
			}
		 else
		  {
		  
		  document.getElementById('timesh').style.display = "none";
		  
		  var td_duration =  $("#tddu").val();
		  
		  localStorage.setItem("td_duration",td_duration);
		  
		  }
		 
		
		
		
		
		 var car_name = $("#car_name").val();
			
			localStorage.setItem("car_name",car_name);
			
			
			 var td_start_time1 = $(".timepicker-12-hr").val();
		      var start = td_start_time1.replace(' ', '')
		      
		      
		      var td_start_time = start.replace(' ', '');
		      
		      localStorage.setItem("td_time",td_start_time);
			
			
			
			
var inserting = "<tr><td >car_name</td><td>grade_name</td><td>suffix_code</td><td><button type=\"button\" class=\"btn btn-success\" id=\"assessment_id\"  onclick=\"bookcar(this)\">Book</button></td></tr>";
var collec = "";


var dealer_code = localStorage.getItem("dealer_code");
		 
		 
		
		$.ajax({   
	        
	        url:"http://toyota-td.apprikart.com/toyota_testdrive_api/dashboard/check_test_drive_car_availability/?dealer_code="+dealer_code+"&car_name="+car_name+"&td_date="+startdate+"&td_start_time="+td_start_time+"&td_duration="+td_duration+"",
	        type:"get",
	        data: "json",
	          
	        success: function(data)
	          { 
	        	
	        	var json_data = JSON.parse(data);
	        	
	        	console.log(json_data)
	        	
	        	 if(json_data.length)
		  	 {
	        	
	        	for(var i=0;i<json_data.length;i++)
        		{
        		
        		var ele = "";
                
                ele = inserting;
                
                var reg_number =  (json_data[i].reg_number);
                var car_name =  (json_data[i].car_name);
                var grade_name =  (json_data[i].grade_name);
                var suffix_code =  (json_data[i].suffix_code);
                
                var availability =  (json_data[i].availability);
                
                
                var td_car =  (json_data[i].td_car);
                
                
                ele = ele.replace("assessment_id",td_car);
                
                
                ele = ele.replace("grade_name",grade_name);
                
                ele = ele.replace("car_name",car_name);
                
                ele = ele.replace("suffix_code",suffix_code);
              
                 
                
                if(availability == true)
                	{
                
                ele = ele.replace("Book","Book");
                	}
                else
                	{
                	
                	ele = ele.replace("Book","<h5 style=\"color:white\">Not Available</h5>");
                	
                	}
                
           collec += ele;
        		
        		
        		
        		}
	        	$("#bodypage").html(collec);
	        	
		  	 }
	        	
	        	  
		          else if (json_data.length == 0) 
		        	  {
		        	 
		        	  document.getElementById('bodypage').innerHTML = "NO Car Found";
		        	  
		        	  }  
	        	
	          }
	        
	});
		
	}

  </script>
  
  
  <script type="text/javascript">
   
   $(document).ready(function() 
        {
     
     
      var select =  "<option value=\"idss\" id=\"abc\">opt_value</option>";
      
      
      var option = "";
  
      var dealer_code = localStorage.getItem("dealer_code");
   
        $.ajax({   
            
           url:"http://toyota-td.apprikart.com/toyota_testdrive_api/dashboard/get_car_variant_details/?dealer_code="+dealer_code+"",
           type:"get",
                data: "json",
             
           success: function(data)
             {    
           
     
           var data = JSON.parse(data);	
           
          
          
          for(var i=0; i< data.length ; i++)
        	  {
        	  
        	  var opt ="";
              
              opt =  select;
              
              var carname = (data[i].car_name);
              
           
              opt = opt.replace("opt_value", carname);
              
              opt = opt.replace("idss", carname);
              
            
                option += opt;
        	  
        	  }
          
          $("#car_name").html(option);
          
          $("#car_name option:first").attr('selected','selected');

           
           }
           
     
    });
    });
  
   
   </script>
   
   
   <script>
			$(function() {
		            var twelveHour = $('.timepicker-12-hr').wickedpicker();
		            $('.time').text('//JS Console: ' + twelveHour.wickedpicker('time'));
		            $('.timepicker-24-hr').wickedpicker({twentyFour: true});
		            $('.timepicker-12-hr-clearable').wickedpicker({clearable: true});
		            
		            var timepicker = $('.timepicker-12-hr').wickedpicker(); 
		            console.log(timepicker.wickedpicker('time'));
		           
				
			});
			</script>
			
			
			 <script>
        $(document).ready(function() {
            $(".hr-time-picker").hrTimePicker({
                disableColor: "#989c9c", // red, green, #000
                enableColor: "#ff5722", // red, green, #000
                arrowTopSymbol: "&#9650;", // ▲ -- Enter html entity code
                arrowBottomSymbol: "&#9660;" // ▼ -- Enter html entity code
            });
        });
    </script>
   
   
   
  


  </body>







</html>