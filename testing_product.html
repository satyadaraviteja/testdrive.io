<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Test-Drive</title>
    <!-- plugins:css -->
   
    <link rel="stylesheet" href="assets/vendors/css/vendor.bundle.base.css">
    <link rel="stylesheet" href="assets/vendors/css/vendor.bundle.addons.css">
    
         	<link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet">
    

    <!-- endinject -->
    <!-- plugin css for this page -->
    <link rel="stylesheet" href="assets/css/shared/style.css">
    <!-- endinject -->
    <!-- Layout styles -->
    <link rel="stylesheet" href="assets/css/demo_1/style.css">
    <!-- End Layout styles -->
    <link rel="shortcut icon" href="assets/images/favicon.png" />


<!--     <link href="css/sty1.css" rel="stylesheet"> 
 -->

<style>

    *
{
	
	font-family: 'Open Sans', sans-serif;
	
}

#scrollmenu {
 
 overflow: auto;
 
}
.card .card-body {
    padding: 1.88rem 1.81rem;
}
.card-body {
    -webkit-box-flex: 1;
    -ms-flex: 1 1 auto;
    flex: 1 1 auto;
    padding: 1.25rem;
}

.card {
    position: relative;
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
    -ms-flex-direction: column;
    flex-direction: column;
    min-width: 0;
    word-wrap: break-word;
    background-color: #fff;
    background-clip: border-box;
    border: 1px solid rgba(0, 0, 0, 0.125);
    border-radius: 0.25rem;
}

.pagination li {
  color: black;
  float: left;
  padding: 8px 16px;
  text-decoration: none;
  transition: background-color .3s;
  border: 1px solid #ddd;
  margin: 0 4px;
}

.pagination .active {
  background-color: #82ca9c;
  color: white !important;
  border: 1px solid #82ca9c;
}
.navbar-brand {
    padding-top: .75rem;
    margin-left:-15px;
    padding-bottom: .75rem;
    font-size: 1rem;
   

  
  }
.pagination li:hover:not(.active) {background-color: #ddd;}  


#overlay{
	position: fixed;
	top: 0;
	z-index: 100;
	width: 100%;
	height:100%;
	display: none;
	background: rgba(0,0,0,0.01);
}
.cv-spinner {
	height: 100%;
	display: flex;
	justify-content: center;
	align-items: center;
}
.spinner {
	width: 40px;
	height: 40px;
	border: 4px #ddd solid;
	border-top: 4px #2e93e6 solid;
	border-radius: 50%;
	animation: sp-anime 0.8s infinite linear;
}
@keyframes sp-anime {
	100% {
		transform: rotate(360deg);
	}
}
.is-hide{
	display:none;
}</style>


  </head>
  <body>
    <div class="container-scroller">
      <!-- partial:../../partials/_navbar.html -->
      <nav class="navbar default-layout col-lg-12 col-12 p-0 fixed-top d-flex flex-row">
        <div class="text-center navbar-brand-wrapper d-flex align-items-top justify-content-center">
          <a class="navbar-brand brand-logo" >
            <img src="assets/images/img/logo-148x48.png" alt="logo" /> </a>
          <a class="navbar-brand brand-logo-mini" >
            <img src="assets/images/img/logo-148x48.png" alt="logo" /> </a>
        </div>
        <div class="navbar-menu-wrapper d-flex align-items-center">
          <ul class="navbar-nav">
            <div id="reportrange" style="background: #fff; cursor: pointer; padding: 5px 10px; border: 1px solid #ccc; width: 100%;color:black">
              <i class="fa fa-calendar"></i>&nbsp;
              <span></span> <i class="fa fa-caret-down"></i>
          </div> 
          </ul>
         
          <ul class="navbar-nav ml-auto">
            <li class="dropdown">
              <button type="button" class = "btn btn-default" style="background-color: #DDE4EB;height: 35px"><select id="mySelect" style="background-color: #DDE4EB"  class="selectBox" onchange="showDiv(this)">
                <option value="National">National</option>
                <option value="Regional">Region</option>
                <option value="Dealer">Dealer</option>
                
              </select></button>
            </li>
            <li class="dropdown" id="replace">
              <button style="margin-right: 10px"><select  id="regions" class="regions" multiple="multiple" style="width: 100px;background-color:#DDE4EB;"  >
					 
              </select></button> 
           </li>
   
           <li  style="margin-left: 8px" id="siteID" >
              <select id="selectdealer" class="dealers" >
     </select>
            </li>
           

            <li style="margin-left: 8px">
              <button type="button" class="btn" style="background-color: #DDE4EB;color:black;height: 35px;" id="check" >Download XL</button>
              </li>
              
              <li style="margin-left: 8px">
                <button type="button" class="btn" style="background-color: #DDE4EB;color:black;height: 35px;" onclick="logfucn()"> LogOut</button>
                </li>
              
          </ul>
         
        </div>
      </nav>
      <!-- partial -->
      <div class="container-fluid page-body-wrapper">
        <!-- partial:partials/_sidebar.html -->
         <nav class="sidebar sidebar-offcanvas" id="sidebar">
          <ul class="nav">
           <br>
            <li class="nav-item">
              <a  href="dashboard.html">
                <img src="assets/images/img/dashboard.png" style="width: 18px;margin-left: 40px;">
                <span class="menu-title" style="color:white;margin-left:8px">Dashboard</span>
              </a>
            </li>
<br>
            <li class="nav-item">
              <a  href="livestatus.html">
                <img src="assets/images/img/location-sign.png" style="width: 18px;margin-left: 40px;">
                <span class="menu-title" style="color:white;margin-left:8px">Live Status</span>
              </a>
            </li><br>
            <li class="nav-item" style="background-color:blue;border-top-right-radius:25px;border-bottom-right-radius:25px;padding-top:5px;padding-bottom:5px;">
              <a  href="product.html">
                <img src="assets/images/img/sports-car.png" style="width: 18px;margin-left: 40px;">
                <span class="menu-title" style="color:white;margin-left:8px">Product/Dealer Wise</span>
              </a>
            </li><br>
            
           
            
            <li class="nav-item">
              <a  href="report.html">
                <img src="assets/images/img/invoice.png" style="width: 18px;margin-left: 40px;">
                <span class="menu-title" style="color:white;margin-left:8px">Reports</span>
              </a>
            </li>
            
          </ul>
        </nav>
        <!-- partial -->



        
        <div class="main-panel">
          <div class="content-wrapper">
            <div class="row">
              <div class="col-lg-12 grid-margin stretch-card">
                <div class="card">
                  <div class="card-body">
                    <h4 class="card-title">Product Wise</h4>
                    <table class="table table-bordered">
                        <thead>
                          <tr>
                            <th><b>Total Test Drives</b></th>
                            <th><b>Glanza</b></th>
                            <th ><b>Yaris</b></th>
                          </tr>
                        </thead>
                        <tbody  class='listings' id="bodypage1">
                         
                        </tbody>
                      </table>
                  </div>
                </div>
              </div>
          </div>



          <div class="row">
            <div class="col-lg-12 grid-margin stretch-card" > 
              <div class="card">
                <div class="card-body" id="scrollmenu">
                  <h4 class="card-title">Dealer Wise</h4>
                  <table class="table table-bordered">
                      <thead>
                        <tr>
                          <th><b>Dealer code</b></th>
                          <th><b>Dealer name</b></th>
                          <th ><b>Total Test Drives</b></th>
                          <th><b>Region</b></th>
                          <th><b>Yaris</b></th>
                          <th ><b>Glanza</b></th>
                        </tr>
                      </thead>
                      <tbody  class='listings' id="bodypage">
                       
                      </tbody>
                    </table>
                </div>
              </div>
            </div>
        </div>

        <div class="row" >
        
            <div class="col-sm-12 grid-margin stretch-card" style="background: transparent;display: flex;justify-content: center;
            align-items: center;">
                    <ul class="pagination" >  
                    <div class="holder">
                    </div>
                  </ul>	
                  </div>
                </div>


          </div>

     

  
          
        <!-- content-wrapper ends -->
          <!-- partial:../../partials/_footer.html -->
          
          <!-- partial -->
        </div>
        <!-- main-panel ends -->
      </div>
      <!-- page-body-wrapper ends -->
    </div>
   <!-- container-scroller -->
    <!-- plugins:js -->


    <div id="overlay">
        <div class="cv-spinner">
            <span class="spinner"></span>
        </div>
    </div>

    <script src="assets/vendors/js/vendor.bundle.base.js"></script>
    <script src="assets/vendors/js/vendor.bundle.addons.js"></script>
    <!-- endinject -->
    <!-- Plugin js for this page-->
    <!-- End plugin js for this page-->
    <!-- inject:js -->
  



    <!-- <script src="assets/js/ext.js"></script> -->
   
    <script src="assets/js/jquery.min.js"></script>
    <script src="pag/jPages.min.js"></script>
    <script src="pag/imtech_pager.js"></script>
    <script src="pag/Pagination.js"></script>


    <script type="text/javascript" src="assets/js/moment.min.js"></script>
    <script type="text/javascript" src="assets/js/daterangepicker.js"></script>
    <link rel="stylesheet" type="text/css" href="assets/css/daterangepicker.css" />


    <link rel="stylesheet" href="assets/css/multiselect.css" />
<script type="text/javascript" src="assets/js/bootstrap-multiselect.min.js"></script>


  </body>



  <script type="text/javascript">

    $(document).ready(function ()
        {
      
      $("#mySelect").change(function()
        {
            var countries = [];
            $.each($(".selectBox option:selected"), function(){            
                countries.push($(this).val());
            });
           var geography = countries;
        
      
      if(geography == "National")
        {
        window.location.reload();
        }
      
        });
      
        }
    );
    </script>



  <script type="text/javascript">

    function dealer_wise_td_data(start,end)
    {
      

        $("#overlay").fadeIn(300);

      
      var startdate = start;
      var enddate = end;

      localStorage.setItem("start", startdate);
  localStorage.setItem("end", enddate);
  
  
  var inserting = "<tr><td>dealer_code</td><td>dealer_name</td><td>total_test_drives</td><td>region</td><td>Yaris</td><td>Glanza</td></tr>";
  
  var collec = "";

  var pages = "";

  var pageSize = 20;

  var mySelect = $('#mySelect').val();

  if(mySelect == "Dealer" || mySelect == "Regional")
      {

      }
      else
      {
      
        $.ajax({   
              
  url:"http://toyota-td.apprikart.com/toyota_testdrive_api/dashboard/dealer_wise_td_data/?start_date="+startdate+"&end_date="+enddate+"&geography=National&records_per_page=20&current_page=1",
      type:"get",
        data: "json",
              
         success: function(data)
         {    
          
          var obj = JSON.parse(data);
    
          
          for(var i=0; i<obj.data.length; i++)
               
          {
            
            
          var ele = "";
          
          ele = inserting;
            
            
          
              var dealer_code =  (obj.data[i].dealer_code);
              var dealer_name =  (obj.data[i].dealer_name);
              var total_test_drives =  (obj.data[i].total_test_drives);
              var region =  (obj.data[i].region);
              var Yaris =  (obj.data[i].Yaris);
              var Glanza =  (obj.data[i].Glanza);
              
              
              
              if(dealer_code == "total_test_drives")
                {
                
                   ele = ele.replace("dealer_code","Total Test Drives");
  
                
                }
              else
                {
                
                   ele = ele.replace("dealer_code",dealer_code);
                
                }
              
              
              
              
                 ele = ele.replace("dealer_code",dealer_code);
                 
                    
                     ele = ele.replace("dealer_name",dealer_name);
                     
                     ele = ele.replace("total_test_drives",total_test_drives);
                     
                     ele = ele.replace("region",region);
                   
                      
                     ele = ele.replace("Yaris",Yaris);
                     
                     ele = ele.replace("Glanza",Glanza);
                     
                collec += ele;
                
                
                
                 }
          
                 $("#bodypage").html(collec); 
          
    var total = obj.meta.total_pages;
  if (total > pageSize) 
  { 
     var pageTotal = Math.ceil(total / pageSize);
     console.log(pageTotal)
     var j;
     for (var i = 0; i < pageTotal; i++) 
     {
       j = i + 1;
     
       pages += '<li class="li_' + j + '"><a id="page_' + j + '" class="pageNumber"   style="margin-left:0px;" href="javascript:;">' + (i + 1) + '</a></li>';


       $('.pagination').html(pages);
     
     }
     $('.pagination .li_1').addClass("active");

   }
   else if(total < pageSize)
   {
    $('.pagination').html("");
   }
        
          
          
      	
    
    }

}).done(function()  {
    setTimeout(function(){
            $("#overlay").fadeOut(300);



    },300);
  });
}	
  }
  
  </script>
    
    <script>

  
      $(document).on("click", ".pageNumber", function () {   
      
        $("#overlay").fadeIn(300);

      
      var startdate =  localStorage.getItem("start");
      
      var enddate =  localStorage.getItem("end");
      
      var current_page = ($(this).attr('id').split('_')[1]);
      
      $('.pagination li').removeClass('active');
      $('.pagination .li_'+current_page+'').addClass("active");


      var inserting = "<tr><td>dealer_code</td><td>dealer_name</td><td>total_test_drives</td><td>region</td><td>Yaris</td><td>Glanza</td></tr>";
  
  var collec = "";



  
      
        $.ajax({   
              
  url:"http://toyota-td.apprikart.com/toyota_testdrive_api/dashboard/dealer_wise_td_data/?start_date="+startdate+"&end_date="+enddate+"&geography=National&records_per_page=20&current_page="+current_page+"",
      type:"get",
        data: "json",
              
         success: function(data)
         {    
          
          var obj = JSON.parse(data);
    
          
          for(var i=0; i<obj.data.length; i++)
               
          {
            
            
          var ele = "";
          
          ele = inserting;
            
            
          
              var dealer_code =  (obj.data[i].dealer_code);
              var dealer_name =  (obj.data[i].dealer_name);
              var total_test_drives =  (obj.data[i].total_test_drives);
              var region =  (obj.data[i].region);
              var Yaris =  (obj.data[i].Yaris);
              var Glanza =  (obj.data[i].Glanza);
              
              
              
              if(dealer_code == "total_test_drives")
                {
                
                   ele = ele.replace("dealer_code","Total Test Drives");
  
                
                }
              else
                {
                
                   ele = ele.replace("dealer_code",dealer_code);
                
                }
              
              
              
              
                 ele = ele.replace("dealer_code",dealer_code);
                 
                    
                     ele = ele.replace("dealer_name",dealer_name);
                     
                     ele = ele.replace("total_test_drives",total_test_drives);
                     
                     ele = ele.replace("region",region);
                   
                      
                     ele = ele.replace("Yaris",Yaris);
                     
                     ele = ele.replace("Glanza",Glanza);
                     
                collec += ele;
                
                
                
                 }
          
                 $("#bodypage").html(collec); 
          
   
        
          
          
      	
    
    }

});

      });
      </script>  
    
    
    
  <script type="text/javascript">
    
  $(function() {
  
      var start = moment().subtract(90, 'days');
      var end = moment();
  
      function cb(start, end) {
          $('#reportrange span').html(' From ' +" : "+start.format('MMMM D, YYYY')  +" "+  'To'  +" : "+end.format('MMMM D, YYYY'));
          $("#overlay").fadeIn(300);

          product_wise_td_data(start.format('DD/MM/YYYY'),end.format('DD/MM/YYYY'));
          dealer_wise_td_data(start.format('DD/MM/YYYY'),end.format('DD/MM/YYYY'));

          localStorage.setItem("start1",start.format('DD/MM/YYYY'));
           localStorage.setItem("end1",end.format('DD/MM/YYYY'));

         
          
          document.getElementById('check').addEventListener('click', function() {
        	  printExcel(start.format('DD/MM/YYYY'),end.format('DD/MM/YYYY'));
        	  
        	});
          
      }
  
      $('#reportrange').daterangepicker({
          startDate: start,
          endDate: end,
          ranges: {
             'Today': [moment(), moment()],
             'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
             'Last 7 Days': [moment().subtract(6, 'days'), moment()],
             'Last 30 Days': [moment().subtract(29, 'days'), moment()],
             'This Month': [moment().startOf('month'), moment().endOf('month')],
             'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
          }
      }, cb);
  
      cb(start, end);
  
  });
  </script>
    
    
    
     <script type="text/javascript">
  
   function product_wise_td_data(start,end)
   {
     
     
     var startdate = start;
     var enddate = end;
  
  var intt = "<tr><td>total_test_drives</td><td>Glanza</td><td>Yaris</td></tr>";
  
  var coll = "";
  
  var mySelect = $('#mySelect').val();

  if(mySelect == "Dealer" || mySelect == "Regional")
      {

      }
      else
      {      
        $.ajax({   
              
      url:"http://toyota-td.apprikart.com/toyota_testdrive_api/dashboard/product_wise_td_data/?start_date="+startdate+"&end_date="+enddate+"&geography=National",
      type:"get",
        data: "json",
              
         success: function(data)
         {    
           
        var ele10 = "";
          
          ele10 = intt;
          
          
            
        var resdata = JSON.parse(data);
      
      
      for(var i=0; i<resdata.length;i++)
        {
  
      key = Object.keys(resdata[i]);
  
      value =Object.values(resdata[i]);
      
        
          
      if(key == "total_test_drives")
        {
         ele10 = ele10.replace("total_test_drives",value);
        }
      
      else if(key == "Yaris")
        {
           ele10 = ele10.replace("Yaris",value);
        }
      
      
      else if(key == "Glanza")
      {
           ele10 = ele10.replace("Glanza",value);
      }
      
      else
        {
         ele10 = ele10.replace("Glanza","--");
         
        }
        }	
         
           coll += ele10;
       
        
      
            
          $("#bodypage1").html(coll); 
          
          
      
         },error: function (xhr, status) {
                    alert("Error Failed !")                  
              }
  
    }).done(function()  {
    setTimeout(function(){
            $("#overlay").fadeOut(300);



    },300);
  });
} 
   }
  
  </script>
  
  
  <!-- Filters -->
      
  <script type="text/javascript">
   
   $(document).ready(function() 
        {
     
     
      var select =  "<option value=\"id\" id=\"abc\">opt_value</option>";
      
      
      var option = "";
  
        
   
        $.ajax({   
            
           url:"http://toyota-td.apprikart.com/toyota_testdrive_api/dashboard/get_car_details/",
           type:"get",
                data: "json",
             
           success: function(data)
             {    
           
     
           var data = JSON.parse(data);	
           
           for ( var i = 0; i < data.length; i++)
              
             {
           
           
  
             var opt ="";
           
             opt =  select;
             
             var carname = (data[i].car_name);
           var carid = (data[i].car_id);
           var orderno = (data[i].order);
             
           
           
             opt = opt.replace("opt_value", carname);
             
             opt = opt.replace("id", carname);
             
           
               option += opt;
           
         }
           
           $("#products").html(option);
           
           
          $('#products')
           .multiselect({
             allSelectedText: 'All',
             maxHeight: 100,
             includeSelectAllOption: true
           })
           .multiselect('selectAll', false)
           .multiselect('updateButtonText');
          
        
       
     
             
     }
    });
    });
  
   
   </script>
   
   
   <script type="text/javascript">
   
   
   $(document).ready(function() 
        {
     
     
      var select =  "<option value=\"id\" id=\"abc\">opt_value</option>";
      
      
      var option = "";
  
        
   
        $.ajax({   
            
           url:"http://toyota-td.apprikart.com/toyota_testdrive_api/dashboard/get_region_details/",
           type:"get",
                data: "json",
             
           success: function(data)
             {    
           
     
           var data = JSON.parse(data);	
           
           
           
           for ( var i = 0; i < data.length; i++)
              
             {
           
           
  
             var opt ="";
           
             opt =  select;
             
             var regions = (data[i]);
         
           
             opt = opt.replace("opt_value", regions);
             
             opt = opt.replace("id", regions);
                              
          
  
              
              option += opt;
               
             
  
       
             
         }
           
           $("#regions").html(option);
           
           
          $('#regions')
           .multiselect({
             allSelectedText: 'All',
             maxHeight: 100,
             includeSelectAllOption: true
           })
           .multiselect('selectAll', false)
           .multiselect('updateButtonText');
          
       
           
     }
        
    });
    });
  
   
   </script>
   
   
  <script type="text/javascript">
   
   $(document).ready(function() 
  {
     
     document.getElementById('siteID').style.display = "none";
        document.getElementById('replace').style.display = "none";
  
   
    var select = 
   
    "<option value=\"id\" id=\"abc\">opt_value</option>";
  
  
  var option = ""; 
  
  
   
  $.ajax({   
          
   url:"http://toyota-td.apprikart.com/toyota_testdrive_api/dashboard/get_dealer_details/",
   type:"get",
             data: "json",
           
      success: function(data)
      {    
     
   
      var data = JSON.parse(data);	
     
      for ( var i = 0; i < data.length; i++)
            
      {
     
        
       // console.log(data[i].dealer_name);
       //console.log(data[i].dealer_code);
        
     
  
            var opt ="";
     
           opt =  select;
           
           var dealer_name = (data[i].dealer_name);
      var dealer_code = (data[i].dealer_code);
     
     
      var dealer = dealer_code+","+dealer_name;
     
           opt = opt.replace("opt_value", dealer);

           opt = opt.replace("id", dealer_code);
            
  
             option += opt;
     
          
           
      }
         
         $("#selectdealer").html(option); 
           
        $('#selectdealer')
        .multiselect({
           includeSelectAllOption: true,
                buttonWidth: 150,
                enableFiltering: true
            });
        
      
  
     }
  
  
  });
  });
  
   
   </script>
  
  
  
   
  <script>
    function showDiv(select){
         if(select.value=="Regional")
         {
          document.getElementById('replace').style.display = "block";
          document.getElementById('siteID').style.display = "none";
          
        var start = moment().subtract(90, 'days');
        var end = moment();
        function cb(start, end) 
        {
            $("#overlay").fadeIn(300);

          regionwisedata(start.format('DD/MM/YYYY'),end.format('DD/MM/YYYY'));
          product_region_wise(start.format('DD/MM/YYYY'),end.format('DD/MM/YYYY'));

          $("#regions").change(function(){
            $("#overlay").fadeIn(300);

          regionwisedata(start.format('DD/MM/YYYY'),end.format('DD/MM/YYYY'));
          product_region_wise(start.format('DD/MM/YYYY'),end.format('DD/MM/YYYY'));
          });
        }
    
        $('#reportrange').daterangepicker({
            startDate: start,
            endDate: end,
            ranges: {
               'Today': [moment(), moment()],
               'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
               'Last 7 Days': [moment().subtract(6, 'days'), moment()],
               'Last 30 Days': [moment().subtract(29, 'days'), moment()],
               'This Month': [moment().startOf('month'), moment().endOf('month')],
               'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
            }
        
        }, cb);
    
        cb(start, end);

        $('.pagination').html(" ");

    
         }
         else if(select.value=="Dealer")
         {
          document.getElementById('siteID').style.display = "block";
          document.getElementById('replace').style.display = "none";
          
    
          var start = moment().subtract(90, 'days');
            var end = moment();
        function cb(start, end) 
        {
            $("#overlay").fadeIn(300);

            dealer_wise_td_data1(start.format('DD/MM/YYYY'),end.format('DD/MM/YYYY'));
          product_dealer_wise1(start.format('DD/MM/YYYY'),end.format('DD/MM/YYYY'));

          $("#selectdealer").change(function(){
            $("#overlay").fadeIn(300);

            dealer_wise_td_data1(start.format('DD/MM/YYYY'),end.format('DD/MM/YYYY'));
          product_dealer_wise1(start.format('DD/MM/YYYY'),end.format('DD/MM/YYYY'));
          });
        
        }
    
        $('#reportrange').daterangepicker({
            startDate: start,
            endDate: end,
            ranges: {
               'Today': [moment(), moment()],
               'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
               'Last 7 Days': [moment().subtract(6, 'days'), moment()],
               'Last 30 Days': [moment().subtract(29, 'days'), moment()],
               'This Month': [moment().startOf('month'), moment().endOf('month')],
               'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
            }
        
        }, cb);
    
        cb(start, end);

        $('.pagination').html(" ");

    
    
         }
         else if(select.value=="National")
         {
            document.getElementById('replace').style.display = "none";
             document.getElementById("siteID").style.display = "none";
          }
      } 
    </script>
  
  
  
  <script type="text/javascript">
  
    function dealer_wise_td_data1(start,end)
    {
      
      
      var startdate = start;
      var enddate = end;
      
      
      
           
      var selectdealer = $('#selectdealer').val();
	var dealer_code = selectdealer.toString();
  
  
  var inserting = "<tr><td>dealer_code</td><td>dealer_name</td><td>total_test_drives</td><td>region</td><td>Yaris</td><td>Glanza</td></tr>";
  
  var collec = "";

  var mySelect = $('#mySelect').val();

  if(mySelect == "National" || mySelect == "Regional")
      {

      }
      else
      {
  
      
        $.ajax({   
              
      url:"http://toyota-td.apprikart.com/toyota_testdrive_api/dashboard/dealer_wise_td_data/?start_date="+startdate+"&end_date="+enddate+"&geography=Dealer&dealer_code="+dealer_code+"&records_per_page=200&current_page=1",
      type:"get",
        data: "json",
              
         success: function(data)
         {    
          
          var obj = JSON.parse(data);
    
          
          for(var i=0; i<obj.data.length; i++)
               
          {
            
            
          var ele = "";
          
          ele = inserting;
            
            
          
              var dealer_code =  (obj.data[i].dealer_code);
              var dealer_name =  (obj.data[i].dealer_name);
              var total_test_drives =  (obj.data[i].total_test_drives);
              var region =  (obj.data[i].region);
              var Yaris =  (obj.data[i].Yaris);
              var Glanza =  (obj.data[i].Glanza);
              
              
              
              if(dealer_code == "total_test_drives")
                {
                
                   ele = ele.replace("dealer_code","Total Test Drives");
  
                
                }
              else
                {
                
                   ele = ele.replace("dealer_code",dealer_code);
                
                }
              
              
              
              
                 ele = ele.replace("dealer_code",dealer_code);
                 
                    
                     ele = ele.replace("dealer_name",dealer_name);
                     
                     ele = ele.replace("total_test_drives",total_test_drives);
                     
                     ele = ele.replace("region",region);
                   
                      
                     ele = ele.replace("Yaris",Yaris);
                     
                     ele = ele.replace("Glanza",Glanza);
                     
                collec += ele;
                
                
                
                 }
          
            $("#bodypage").html(collec); 
            
            
            $('.pagination').html(" ");

            
            
          
      
        },error: function (xhr, status) {
                    alert("Error Failed !")                  
              }
  
    }).done(function()  {
    setTimeout(function(){
            $("#overlay").fadeOut(300);



    },300);
  });

}
      
    }
  
  </script>
  
  
  <script type="text/javascript">
   
   
   function printExcel(start,end)
   {
	   
	   
	      var startdate = start;
	      var enddate = end;

        var geogrphy = $('#mySelect').val();
        if(geogrphy == "Regional")
  {
    printExcel_region_wise1(startdate,enddate);
  }
  else if(geogrphy == "Dealer"){
    printExcel_dealer_wise1(startdate,enddate)
  }  
  else 
  {

	      window.location.href  = "http://toyota-td.apprikart.com/toyota_testdrive_api/dashboard/dealer_wise_td_data/?start_date="+startdate+"&end_date="+enddate+"&geography=National&download_report=true"
	   
  }
   }

   function  printExcel_region_wise1(start,end)
{
  var startdate = start;
	var enddate = end;


  var dealer = $('#regions').val();
         var regions = (JSON.stringify(dealer));

        // alert(regions)

  window.location.href  = "http://toyota-td.apprikart.com/toyota_testdrive_api/dashboard/dealer_wise_td_data/?start_date="+startdate+"&end_date="+enddate+"&geography=Regional&region="+regions+"&download_report=true"

}   

function printExcel_dealer_wise1(start,end)
{
  var startdate = start;
	      var enddate = end;

        var value = $("#selectdealer").val();
        var regions = value.toString();


window.location.href  = "http://toyota-td.apprikart.com/toyota_testdrive_api/dashboard/dealer_wise_td_data/?start_date="+startdate+"&end_date="+enddate+"&geography=Dealer&dealer_code="+regions+"&download_report=true"

}
   </script>    



<script type="text/javascript">

var url=localStorage.getItem("access");

if(url == 0)
{

window.location.href="#";
}
else 
{

 	window.location.href="index.html";
 	
}


</script>


<script>

  function logfucn()
  {
  
    localStorage.removeItem("access");
     window.location.href="index.html";
  
  }
  </script>


<script>

function regionwisedata(start,end)
{

  var startdate = start;
      var enddate = end;
      
      
      var regions = $('#regions').val();
	var region = (JSON.stringify(regions)); 
  
  var inserting = "<tr><td>dealer_code</td><td>dealer_name</td><td>total_test_drives</td><td>region</td><td>Yaris</td><td>Glanza</td></tr>";
  
  var collec = "";
 
  
  var mySelect = $('#mySelect').val();

  if(mySelect == "National" || mySelect == "Dealer")
      {

      }
      else
      {
      
        $.ajax({   
              
      url:"http://toyota-td.apprikart.com/toyota_testdrive_api/dashboard/dealer_wise_td_data/?start_date="+startdate+"&end_date="+enddate+"&geography=Regional&region="+region+"&records_per_page=200&current_page=1",
      type:"get",
        data: "json",
              
         success: function(data)
         {    
          
          var obj = JSON.parse(data);
    
          
          for(var i=0; i<obj.data.length; i++)
               
          {
            
            
          var ele = "";
          
          ele = inserting;
            
            
          
              var dealer_code =  (obj.data[i].dealer_code);
              var dealer_name =  (obj.data[i].dealer_name);
              var total_test_drives =  (obj.data[i].total_test_drives);
              var region =  (obj.data[i].region);
              var Yaris =  (obj.data[i].Yaris);
              var Glanza =  (obj.data[i].Glanza);
              
              
              
              if(dealer_code == "total_test_drives")
                {
                
                   ele = ele.replace("dealer_code","Total Test Drives");
  
                
                }
              else
                {
                
                   ele = ele.replace("dealer_code",dealer_code);
                
                }
              
              
              
              
                 ele = ele.replace("dealer_code",dealer_code);
                 
                    
                     ele = ele.replace("dealer_name",dealer_name);
                     
                     ele = ele.replace("total_test_drives",total_test_drives);
                     
                     ele = ele.replace("region",region);
                   
                      
                     ele = ele.replace("Yaris",Yaris);
                     
                     ele = ele.replace("Glanza",Glanza);
                     
                collec += ele;
                
                
                
                 }
          
            $("#bodypage").html(collec); 



          

        },error: function (xhr, status) {
                    alert("Error Failed !")                  
              }
            }).done(function()  {
    setTimeout(function(){
            $("#overlay").fadeOut(300);



    },300);
  });
            }
}



</script>





<script type="text/javascript">
  
  function product_dealer_wise1(start,end)
  {
    
    
    var startdate = start;
    var enddate = end;


  
 
 var intt = "<tr><td>total_test_drives</td><td>Glanza</td><td>Yaris</td></tr>";
 
 var coll = "";

 var selectdealer = $('#selectdealer').val();
	var dealer_code = selectdealer.toString();


 var mySelect = $('#mySelect').val();

if(mySelect == "National" || mySelect == "Regional")
    {

    }
    else
    {
       
       $.ajax({   
             
     url:"http://toyota-td.apprikart.com/toyota_testdrive_api/dashboard/product_wise_td_data/?start_date="+startdate+"&end_date="+enddate+"&geography=Dealer&dealer_code="+dealer_code+"&records_per_page=200&current_page=1",
     type:"get",
       data: "json",
             
        success: function(data)
        {    
          
       var ele10 = "";
         
         ele10 = intt;
         


         
           
       var resdata = JSON.parse(data);

       console.log(resdata)
     
     
     for(var i=0; i<resdata.length;i++)
       {
 
     key = Object.keys(resdata[i]);
 
     value =Object.values(resdata[i]);
     
       
         
     if(key == "total_test_drives")
       {
        ele10 = ele10.replace("total_test_drives",value);
       }
     
     else if(key == "Yaris")
       {
          ele10 = ele10.replace("Yaris",value);
       }
     
     
     else if(key == "Glanza")
     {
          ele10 = ele10.replace("Glanza",value);
     }
     
     else
       {
        ele10 = ele10.replace("Glanza","--");
        
       }
       }	
        
          coll += ele10;
      
       
     
           
         $("#bodypage1").html(coll); 


       
         
     
        },error: function (xhr, status) {
                    alert("Error Failed !")                  
              }
 
    }).done(function()  {
    setTimeout(function(){
            $("#overlay").fadeOut(300);



    },300);
  });
}
  }
 
 </script>


<script type="text/javascript">
  
  function product_region_wise(start,end)
  {
    
    
    var startdate = start;
    var enddate = end;
 
 var intt = "<tr><td>total_test_drives</td><td>Glanza</td><td>Yaris</td></tr>";
 
 var coll = "";

 var regions = $('#regions').val();
	var region = (JSON.stringify(regions));
 
 var mySelect = $('#mySelect').val();

if(mySelect == "National" || mySelect == "Dealer")
    {

    }
    else
    {
       
       $.ajax({   
             
     url:"http://toyota-td.apprikart.com/toyota_testdrive_api/dashboard/product_wise_td_data/?start_date="+startdate+"&end_date="+enddate+"&geography=Regional&region="+region+"&records_per_page=200&current_page=1",
     type:"get",
       data: "json",
             
        success: function(data)
        {    
          
       var ele10 = "";
         
         ele10 = intt;
         


         
           
       var resdata = JSON.parse(data);

       console.log(resdata)
     
     
     for(var i=0; i<resdata.length;i++)
       {
 
     key = Object.keys(resdata[i]);
 
     value =Object.values(resdata[i]);
     
       
         
     if(key == "total_test_drives")
       {
        ele10 = ele10.replace("total_test_drives",value);
       }
     
     else if(key == "Yaris")
       {
          ele10 = ele10.replace("Yaris",value);
       }
     
     
     else if(key == "Glanza")
     {
          ele10 = ele10.replace("Glanza",value);
     }
     
     else
       {
        ele10 = ele10.replace("Glanza","--");
        
       }
       }	
        
          coll += ele10;
      
       
     
           
         $("#bodypage1").html(coll); 
         
         
     
        },error: function (xhr, status) {
                    alert("Error Failed !")                  
              }
 
    }).done(function()  {
    setTimeout(function(){
            $("#overlay").fadeOut(300);



    },300);
  });
} 
  }
 
 </script>





</html>