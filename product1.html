<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Test-Drive</title>
    <!-- plugins:css -->
   
    <link rel="stylesheet" href="assets/vendors/css/vendor.bundle.base.css">
    <link rel="stylesheet" href="assets/vendors/css/vendor.bundle.addons.css">
    
    <link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/vendors/iconfonts/mdi/css/materialdesignicons.min.css">
    
<link href="//db.onlinewebfonts.com/c/1ac36e54c1c9577fb0468937689adfd9?family=Toyota+Display" rel="stylesheet" type="text/css"/>

    <!-- endinject -->
    <!-- plugin css for this page -->
    <link rel="stylesheet" href="assets/css/shared/style.css">
    <!-- endinject -->
    <!-- Layout styles -->
    <link rel="stylesheet" href="assets/css/demo_1/style.css">
    <!-- End Layout styles -->
    <link rel="shortcut icon" href="assets/images/favicon.png" />


    <link rel="stylesheet" href="assets/fonts/Roboto-Bold.ttf" type="text/css">
    <link rel="stylesheet" href="assets/fonts/Roboto-Regular.ttf" type="text/css">
    <link rel="stylesheet" href="assets/fonts/Roboto-Medium.ttf" type="text/css">
<style>

@font-face {
    font-family: "Roboto-Bold";
    src:url(/assets/fonts/Roboto-Bold.ttf);

}
@font-face {
    font-family: "Roboto-Regular";
    src:url(/assets/fonts/Roboto-Regular.ttf);
    
}
@font-face {
    font-family: "Roboto-Medium";
    src:url(/assets/fonts/Roboto-Medium.ttf);
    
}
  /* *
{
  
font-family: "Toyota Display";   
} */

#ex1 {
  
  height: 400px;
  
  overflow-y: scroll;
}


    .card .card-body {
    padding: 1.88rem 1.81rem;
}
.card-body {
    -webkit-box-flex: 1;
    -ms-flex: 1 1 auto;
    flex: 1 1 auto;
    padding: 1.25rem;
}

.card {
    position: relative;
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
    -ms-flex-direction: column;
    flex-direction: column;
    min-width: 0;
    word-wrap: break-word;
    background-color: #fff;
    background-clip: border-box;
    border: 1px solid rgba(0, 0, 0, 0.125);
    border-radius: 0.25rem;
}

#deler{
font-size: 0.9rem;
margin-top: 6px;
}


.holder a.jp-next , .holder a.jp-previous {
    margin-left: 5px;
    border-top-right-radius: 0px;
    border-bottom-right-radius: 0px;
    cursor: pointer;
    color: black;
    border: 1px solid #5d78ff;
}


.holder a.jp-current, a.jp-current:hover {
    z-index: 2;
    color: white;
    cursor: default;
    background-color: #5d78ff;
}

        
        
        
        .holder a.jp-disabled, a.jp-disabled:hover {
    color: white;
    background-color: #5d78ff;
    z-index: 2;
}

.holder
        {
         margin: 15px 0;
            display: inline-block;
    padding-left: 0;
    margin: 20px 0;
    border-radius: 4px;
float:right;
cursor: pointer;
        }
        .holder a
        {
	float: left;
	padding: 6px 12px;
	margin-left: 3px;
	color: black;
	text-decoration: none;	
border-radius:5%;
cursor: pointer;
background-color: white;
border: 1px solid #5d78ff;
        }
        .holder a:hover
        {
           
 
	z-index: 2;
    color: #eee;
    background-color:#5d78ff;
    border-color: #5d78ff;

	
           

        }
        
          .holder span
        {
           display: none;
        } 

        #scrollmenu {
 
 overflow: auto;
 
}


.pagination li {
  color: black;
  float: left;
  padding: 8px 16px;
  text-decoration: none;
  transition: background-color .3s;
  border: 1px solid #ddd;
  margin: 0 4px;
}

.pagination .active {
  background-color: #82ca9c;
  color: white !important;
  border: 1px solid #82ca9c;
}
.navbar-brand {
    padding-top: .75rem;
    margin-left:-15px;
    padding-bottom: .75rem;
    font-size: 1rem;
   

  
  }
.pagination li:hover:not(.active) {background-color: #ddd;}  




#overlay{
	position: fixed;
	top: 0;
	z-index: 100;
	width: 100%;
	height:100%;
	display: none;
	background: rgba(0,0,0,0.01);
}
.cv-spinner {
	height: 100%;
	display: flex;
	justify-content: center;
	align-items: center;
}
.spinner {
	width: 40px;
	height: 40px;
	border: 4px #ddd solid;
	border-top: 4px #2e93e6 solid;
	border-radius: 50%;
	animation: sp-anime 0.8s infinite linear;
}
@keyframes sp-anime {
	100% {
		transform: rotate(360deg);
	}
}
.is-hide{
	display:none;
}

</style>


  </head>
  <body>
    <div class="container-scroller" id="mains">
      <!-- partial:../../partials/_navbar.html -->
      <nav class="navbar default-layout col-lg-12 col-12 p-0 fixed-top d-flex flex-row">
        <div class="text-center navbar-brand-wrapper d-flex align-items-top justify-content-center">
          <a class="navbar-brand brand-logo" >
            <img src="assets/images/img/logo-148x48.png" alt="logo" /> </a>
          <a class="navbar-brand brand-logo-mini" >
            <img src="assets/images/img/logo-148x48.png" alt="logo" /> </a>
        </div>
        <div class="navbar-menu-wrapper d-flex align-items-center">
          <ul class="navbar-nav">
            <div id="reportrange" style="font-family:Roboto-Medium;background: #fff; cursor: pointer; padding: 3px 5px; border: 1px solid #ccc; width: 100%;color:black">
              <i class="fa fa-calendar"></i>&nbsp;
              <span></span> <i class="fa fa-caret-down"></i>
          </div> 
          </ul>
         
          <ul class="navbar-nav ml-auto">
            <li  id="replace">
				<h3 id="deler" style="font-family: Toyota Display;"></h3>
             
           </li>
                      

            <li style="margin-left: 8px">
              <button type="button" class="btn" style="background-color: #DDE4EB;color:black;height: 35px;font-family:Roboto-Medium;" id="check" >Download XL</button>
              </li>
              
              <li style="margin-left: 8px">
                <button type="button" class="btn" style="background-color: #DDE4EB;color:black;height: 35px;font-family:Roboto-Medium" onclick="logfucn()"> LogOut</button>
                </li>
              
          </ul>

	<button class="navbar-toggler navbar-toggler-right d-lg-none align-self-center" type="button" data-toggle="offcanvas">
	 <span class="mdi mdi-menu"></span>
        </button>
         
        </div>
      </nav>
      <!-- partial -->
      <div class="container-fluid page-body-wrapper">
        <!-- partial:partials/_sidebar.html -->
         <nav class="sidebar sidebar-offcanvas" id="sidebar">
          <ul class="nav">
           <br>
            <li class="nav-item" >
              <a  href="dashboard1.html">
                <img src="assets/images/img/dashboard.png" style="width: 18px;margin-left: 40px;">
                <span class="menu-title" style="color:white;margin-left:8px;font-family:Roboto-Bold">Dashboard</span>
              </a>
            </li>
<br>
            <li class="nav-item">
              <a  href="livestatus1.html">
                <img src="assets/images/img/location-sign.png" style="width: 18px;margin-left: 40px;">
                <span class="menu-title" style="color:white;margin-left:8px;font-family:Roboto-Bold">Live Status</span>
              </a>
            </li><br>
            <li class="nav-item" style="background-color:blue;border-top-right-radius:25px;border-bottom-right-radius:25px;padding-top:8px;padding-bottom:8px;">
              <a  href="product1.html">
                <img src="assets/images/img/sports-car.png" style="width: 18px;margin-left: 40px;">
                <span class="menu-title" style="color:white;margin-left:8px;font-family:Roboto-Bold">Product/Dealer Wise</span>
              </a>
            </li><br>
            
             <li class="nav-item">
              <a  href="test_drive_scheduler.html">
                <img src="img/dashboard unselected.png" style="width: 18px;margin-left: 40px;">
                <span class="menu-title" style="color:white;margin-left:8px;font-family:Roboto-Bold">TestDrive Scheduler</span>
              </a>
            </li><br>
            
            <li class="nav-item">
              <a  href="report1.html">
                <img src="assets/images/img/invoice.png" style="width: 18px;margin-left: 40px;">
                <span class="menu-title" style="color:white;margin-left:8px;font-family:Roboto-Bold">Reports</span>
              </a>
            </li><br>
            <li class="nav-item" id="fleet">
              <a  href="dealer_fleet_dashboard.html">
                <img src="asts/piee.png" style="width: 18px;margin-left: 40px;">
                <span class="menu-title" style="color:white;margin-left:8px;font-family:Roboto-Bold">Fleet Dashboard</span>
              </a>
              </li><br>
              <li class="nav-item" id="fleet1">
              <a  href="fleetmng_dealer.html">
                <img src="asts/dboard.png" style="width: 18px;margin-left: 40px;">
                <span class="menu-title" style="color:white;margin-left:8px;font-family:Roboto-Bold">Fleet Activity</span>
              </a>
              </li><br>
            
          </ul>
        </nav>
        <!-- partial -->



        
        <div class="main-panel">
          <div class="content-wrapper">
            <div class="row">
              <div class="col-lg-12 grid-margin stretch-card">
                <div class="card">
                  <div class="card-body">
                    <h4 class="card-title" style="font-family: Roboto-Medium;font-size:15px">Product Wise</h4>
                    <table class="table table-bordered">
                        <thead>
                          <tr style="font-family: Roboto-Bold;">
                            <th style="font-family: Roboto-Bold;">Total Test Drives</th>
                            <th style="font-family: Roboto-Bold;">Glanza</th>
                            <th style="font-family: Roboto-Bold;">Yaris</th>
                          </tr>
                        </thead>
                        <tbody  class='listings' id="bodypage1" style="font-family: Roboto-Regular;">
                         
                        </tbody>
                      </table>
                  </div>
                </div>
              </div>
          </div>



          <div class="row">
            <div class="col-lg-12 grid-margin stretch-card" > 
              <div class="card">
                <div class="card-body" id="scrollmenu">
                  <h4 class="card-title" style="font-family:Roboto-Medium;font-size:15px">Dealer Wise</h4>
                  <table class="table table-bordered">
                      <thead>
                        <tr>
                          <th style="font-family:Roboto-Bold">Dealer code</th>
                          <th style="font-family:Roboto-Bold">Dealer name</th>
                          <th style="font-family:Roboto-Bold">Total Test Drives</th>
                          <th style="font-family:Roboto-Bold">Region</th>
                          <th style="font-family:Roboto-Bold">Yaris</th>
                          <th style="font-family:Roboto-Bold">Glanza</th>
                        </tr>
                      </thead>
                      <tbody  class='listings' id="bodypage" style="font-family: Roboto-Regular;">
                       
                      </tbody>
                    </table>
                </div>
              </div>
            </div>
        </div>


        <div class="row" >
        
          <div class="col-sm-12 grid-margin stretch-card" style="background: transparent;display: flex;justify-content: center;
          align-items: center;">
                  <ul class="pagination" >  
                  <div class="holder">
                  </div>
                </ul>	
                </div>
              </div>


        </div>

   


          
          <!-- content-wrapper ends -->
          <!-- partial:../../partials/_footer.html -->
          
          <!-- partial -->
        </div>
        <!-- main-panel ends -->
      </div>
      <!-- page-body-wrapper ends -->
    </div>
    <!-- container-scroller -->
    <!-- plugins:js -->



	<div class="container-fluid" id="prot" style="display:none">
     	<div class="col-sm-12">
	<img src="img/rotate.jpg" style="width: 100%;height: 100%;margin-top: 50%">
         <p style="font-size: 15px;color: red;font-family: Times New Roman, Times, serif;">This site is Best Viewed in Landscape Orientaion</p>
	 </div>
   </div>
   

   <div id="overlay">
    <div class="cv-spinner">
        <span class="spinner"></span>
    </div>
</div>

   
    <script src="assets/js/jquery.min.js"></script>
    <script src="pag/jPages.min.js"></script>
    <script src="pag/imtech_pager.js"></script>
    <script src="pag/Pagination.js"></script>


<script type="text/javascript" src="assets/js/moment.min.js"></script>
<script type="text/javascript" src="assets/js/daterangepicker.js"></script>
<link rel="stylesheet" type="text/css" href="assets/css/daterangepicker.css" />


<link rel="stylesheet" href="assets/css/multiselect.css" />
<script type="text/javascript" src="assets/js/bootstrap-multiselect.min.js"></script>

  </body>

  <script type="text/javascript">

    $(document).ready(function ()
        {
    
    
        var dealer_code = localStorage.getItem("dealer_code");
          document.getElementById('deler').innerHTML = "Welcome : " +dealer_code;
          document.getElementById('deler').style.fontFamily="Roboto-Medium"
          
          var sales = localStorage.getItem("sales");
    
    
          if(sales == "sales")
          {
            document.getElementById('fleet').style.display = "none";
            document.getElementById('fleet1').style.display = "none";
    
          }
          else if(sales == "dealers")
          {
            document.getElementById('fleet').style.display = "block";
            document.getElementById('fleet1').style.display = "block";
          }
    
    
    
      
        }
    );
    </script>

<script>

(function ($) {
  'use strict';
  $(function () {
    $('[data-toggle="offcanvas"]').on("click", function () {
      $('.sidebar-offcanvas').toggleClass('active')
    });
  });
})(jQuery);

</script>



  <script type="text/javascript">

    function dealer_wise_td_data(start,end)
    {
      
      
      var startdate = start;
      var enddate = end;

      localStorage.setItem("start", startdate);
      localStorage.setItem("end", enddate);
  
  
  var inserting = "<tr><td>dealer_code</td><td>dealer_name</td><td>total_test_drives</td><td>region</td><td>Yaris</td><td>Glanza</td></tr>";
  
  var collec = "";
  
  var dealer_code = localStorage.getItem("dealer_code");

  var pages = "";

  var pageSize = 20;
  
      
        $.ajax({   
              
  url:"http://toyota-td.apprikart.com/toyota_testdrive_api/dashboard/dealer_wise_td_data/?start_date="+startdate+"&end_date="+enddate+"&geography=Dealer&dealer_code="+dealer_code+"&records_per_page=20&current_page=1",
      type:"get",
        data: "json",
              
         success: function(data)
         {    
          
          var obj = JSON.parse(data);
    
          
          for(var i=0; i<obj.data.length; i++)
               
          {
            
            
          var ele = "";
          
          ele = inserting;
            
            
          
              var dealer_code =  (obj.data[i].dealer_code);
              var dealer_name =  (obj.data[i].dealer_name);
              var total_test_drives =  (obj.data[i].total_test_drives);
              var region =  (obj.data[i].region);
              var Yaris =  (obj.data[i].Yaris);
              var Glanza =  (obj.data[i].Glanza);
              
              
              
              if(dealer_code == "total_test_drives")
                {
                
                   ele = ele.replace("dealer_code","Total Test Drives");
  
                
                }
              else
                {
                
                   ele = ele.replace("dealer_code",dealer_code);
                
                }
              
              
              
              
                 ele = ele.replace("dealer_code",dealer_code);
                 
                    
                     ele = ele.replace("dealer_name",dealer_name);
                     
                     ele = ele.replace("total_test_drives",total_test_drives);
                     
                     ele = ele.replace("region",region);
                   
                      
                     ele = ele.replace("Yaris",Yaris);
                     
                     ele = ele.replace("Glanza",Glanza);
                     
                collec += ele;
                
                
                
                 }
          
            $("#bodypage").html(collec); 

 var total = obj.meta.total_pages;
  if (total > pageSize) 
  { 
     var pageTotal = Math.ceil(total / pageSize);
     console.log(pageTotal)
     var j;
     for (var i = 0; i < pageTotal; i++) 
     {
       j = i + 1;
     
       pages += '<li class="li_' + j + '"><a id="page_' + j + '" class="pageNumber"   style="margin-left:0px;" href="javascript:;">' + (i + 1) + '</a></li>';


       $('.pagination').html(pages);
     
     }
     $('.pagination .li_1').addClass("active");

   }
   else if(total < pageSize)
   {
    $('.pagination').html("");
   }
          
      
      }
  
    }).done(function()  {
    setTimeout(function(){
            $("#overlay").fadeOut(300);


    },300);
  });
      
    }
  
  </script>


<script>
  
$(document).on("click", ".pageNumber", function () {   


var startdate =  localStorage.getItem("start");

var enddate =  localStorage.getItem("end");

var current_page = ($(this).attr('id').split('_')[1]);

$('.pagination li').removeClass('active');
$('.pagination .li_'+current_page+'').addClass("active");


var inserting = "<tr><td>dealer_code</td><td>dealer_name</td><td>total_test_drives</td><td>region</td><td>Yaris</td><td>Glanza</td></tr>";
  
  var collec = "";
  
  var dealer_code = localStorage.getItem("dealer_code");

  
      
        $.ajax({   
              
  url:"http://toyota-td.apprikart.com/toyota_testdrive_api/dashboard/dealer_wise_td_data/?start_date="+startdate+"&end_date="+enddate+"&geography=Dealer&dealer_code="+dealer_code+"&records_per_page=20&current_page="+current_page+"",
      type:"get",
        data: "json",
              
         success: function(data)
         {    
          
          var obj = JSON.parse(data);
    
          
          for(var i=0; i<obj.data.length; i++)
               
          {
            
            
          var ele = "";
          
          ele = inserting;
            
            
          
              var dealer_code =  (obj.data[i].dealer_code);
              var dealer_name =  (obj.data[i].dealer_name);
              var total_test_drives =  (obj.data[i].total_test_drives);
              var region =  (obj.data[i].region);
              var Yaris =  (obj.data[i].Yaris);
              var Glanza =  (obj.data[i].Glanza);
              
              
              
              if(dealer_code == "total_test_drives")
                {
                
                   ele = ele.replace("dealer_code","Total Test Drives");
  
                
                }
              else
                {
                
                   ele = ele.replace("dealer_code",dealer_code);
                
                }
              
              
              
              
                 ele = ele.replace("dealer_code",dealer_code);
                 
                    
                     ele = ele.replace("dealer_name",dealer_name);
                     
                     ele = ele.replace("total_test_drives",total_test_drives);
                     
                     ele = ele.replace("region",region);
                   
                      
                     ele = ele.replace("Yaris",Yaris);
                     
                     ele = ele.replace("Glanza",Glanza);
                     
                collec += ele;
                
                
                
                 }
          
            $("#bodypage").html(collec); 

          
      
      }
  
  });


});
</script>
    
    
    
    
    
  <script type="text/javascript">
    
  $(function() {
	  
	  
	  var dealer_code = localStorage.getItem("dealer_code");

  
      var start = moment().subtract(90, 'days');
      var end = moment();
  
      function cb(start, end) {
          $('#reportrange span').html(' From ' +" : "+start.format('MMMM D, YYYY')  +" "+  'To'  +" : "+end.format('MMMM D, YYYY'));

          $("#overlay").fadeIn(300);

          product_wise_td_data(start.format('DD/MM/YYYY'),end.format('DD/MM/YYYY'));
          dealer_wise_td_data(start.format('DD/MM/YYYY'),end.format('DD/MM/YYYY'));  

          document.getElementById('check').addEventListener('click', function() {
        	  printExcel(start.format('DD/MM/YYYY'),end.format('DD/MM/YYYY'));
        	  
        	});
          
      }
  
      $('#reportrange').daterangepicker({
          startDate: start,
          endDate: end,
          ranges: {
             'Today': [moment(), moment()],
             'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
             'Last 7 Days': [moment().subtract(6, 'days'), moment()],
             'Last 30 Days': [moment().subtract(29, 'days'), moment()],
             'This Month': [moment().startOf('month'), moment().endOf('month')],
             'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
          }
      }, cb);
  
      cb(start, end);
  
  });
  </script>
    
    
    
     <script type="text/javascript">
  
   function product_wise_td_data(start,end)
   {
     
     
     var startdate = start;
     var enddate = end;
  
  var intt = "<tr><td>total_test_drives</td><td>Glanza</td><td>Yaris</td></tr>";
  
  var coll = "";
  
  
  var dealer_code = localStorage.getItem("dealer_code");
  
        
        $.ajax({   
              
      url:"http://toyota-td.apprikart.com/toyota_testdrive_api/dashboard/product_wise_td_data/?start_date="+startdate+"&end_date="+enddate+"&geography=Dealer&dealer_code="+dealer_code+"",
      type:"get",
        data: "json",
              
         success: function(data)
         {    
           
        var ele10 = "";
          
          ele10 = intt;
          
          
            
        var resdata = JSON.parse(data);
      
      
      for(var i=0; i<resdata.length;i++)
        {
  
      key = Object.keys(resdata[i]);
  
      value =Object.values(resdata[i]);
      
        
          
      if(key == "total_test_drives")
        {
         ele10 = ele10.replace("total_test_drives",value);
        }
      
      else if(key == "Yaris")
        {
           ele10 = ele10.replace("Yaris",value);
        }
      
      
      else if(key == "Glanza")
      {
           ele10 = ele10.replace("Glanza",value);
      }
      
      else
        {
         ele10 = ele10.replace("Glanza","--");
         
        }
        }	
         
           coll += ele10;
       
        
      
            
          $("#bodypage1").html(coll); 
          
          
      
        }
  
      }).done(function()  {
    setTimeout(function(){
            $("#overlay").fadeOut(300);


    },300);
  });
      
   }
  
  </script>
  
  
  
  <script type="text/javascript">
   
   
   function printExcel(start,end)
   {
	   
	   
	      var startdate = start;
	      var enddate = end;
	      
	      var dealer_code = localStorage.getItem("dealer_code");

	      window.location.href  = "http://toyota-td.apprikart.com/toyota_testdrive_api/dashboard/dealer_wise_td_data/?start_date="+startdate+"&end_date="+enddate+"&geography=Dealer&dealer_code="+dealer_code+"&download_report=true"
	   
	   
   }
   
   </script>    
   
   
   <script type="text/javascript">

   var url=localStorage.getItem("access");

if(url == 0)
{

window.location.href="#";
}
else 
{

 	window.location.href="index.html";
 	
}


</script>


<script>

  function logfucn()
  {
  
    localStorage.removeItem("access");
     window.location.href="index.html";
  
  }
  </script>


<script>


		if (window.matchMedia("(orientation: portrait)").matches) 
		{
				//alert("P Mode");
				document.getElementById('mains').style.display = "none";
				document.getElementById('prot').style.display = "block";
		}
	
		if (window.matchMedia("(orientation: landscape)").matches) {
			document.getElementById('mains').style.display = "block";
		    document.getElementById('prot').style.display = "none";
		 }
		
		window.addEventListener("orientationchange", function() {
	
		if(window.orientation == "0")
		{
			document.getElementById('mains').style.display = "none";
				document.getElementById('prot').style.display = "block";
		}
		if(window.orientation == "90")
		{
			document.getElementById('mains').style.display = "block";
		    document.getElementById('prot').style.display = "none";
		}
	
	
	}, false);
		
</script>



</html>